
<!DOCTYPE html>
<html lang="zh-CN" class="loading">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Linux以及qemu网络配置的学习 - pup2y&#39;s world</title>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate" />
    <meta name="keywords" content="Fechin,"> 
    <meta name="description" content="最近一直在使用firmadyne仿真固件，因为firmadyne主要还是利用qemu的系统模式加载预先编译好的Linux内核将固件文件系统托起，从而模拟Linux系统的嵌入式设备的运行。在firma,"> 
    <meta name="author" content="青云"> 
    <link rel="alternative" href="atom.xml" title="pup2y&#39;s world" type="application/atom+xml"> 
    <link rel="icon" href="/img/favicon.jpg"> 
    
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">

    
<link rel="stylesheet" href="/css/diaspora.css">

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
         (adsbygoogle = window.adsbygoogle || []).push({
              google_ad_client: "ca-pub-8691406134231910",
              enable_page_level_ads: true
         });
    </script>
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
<meta name="generator" content="Hexo 4.2.0"><link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>

<body class="loading">
    <span id="config-title" style="display:none">pup2y&#39;s world</span>
    <div id="loader"></div>
    <div id="single">
    <div id="top" style="display: block;">
    <div class="bar" style="width: 0;"></div>
    <a class="iconfont icon-home image-icon" href="javascript:;" data-url="http://pup2y.github.io"></a>
    <div title="播放/暂停" class="iconfont icon-play"></div>
    <h3 class="subtitle">Linux以及qemu网络配置的学习</h3>
    <div class="social">
        <div>
            <div class="share">
                <a title="获取二维码" class="iconfont icon-scan" href="javascript:;"></a>
            </div>
            <div id="qr"></div>
        </div>
    </div>
    <div class="scrollbar"></div>
</div>

    <div class="section">
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="article">
    <div class='main'>
        <h1 class="title">Linux以及qemu网络配置的学习</h1>
        <div class="stuff">
            <span>四月 02, 2020</span>
			
			<span>
   阅读数  <span id="busuanzi_value_page_pv"></span>
</span>
            

        </div>
        <div class="content markdown">
            <p>最近一直在使用firmadyne仿真固件，因为firmadyne主要还是利用qemu的系统模式加载预先编译好的Linux内核将固件文件系统托起，从而模拟Linux系统的嵌入式设备的运行。在firmadyne推断网络配置之后生成run.sh文件。其中有关配置网卡部分，以便qemu与宿主机进行通信。在复现CVE进行仿真的时候会出现尽管配置好网卡但是无法通信的问题，所以对Linux以及Qemu的网络通信配置进行学习。</p>
<h1 id="Qemu与外部网络通信"><a href="#Qemu与外部网络通信" class="headerlink" title="Qemu与外部网络通信"></a>Qemu与外部网络通信</h1><h2 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h2><p>为了使虚拟机能够与外界通信，Qemu需要为虚拟机提供网络设备。命令行上用-net nic为虚拟机创建虚拟机网卡。例如，qemu的命令行选项<code>-net nic,model=pcnet</code> 表示为虚拟机添加一块pcnet型的以太网卡。如果省略model参数则qemu会默认选择一种 e1000 网卡类型。</p>
<p>有了虚拟网络设备，下面的问题是如何用这些设备来联网。每个qemu的运行实例是宿主机中的一个进程，而每个这样的进程中可以虚拟一些VLAN，虚拟机网络设备接入这些VLAN中。当某个VLAN上连接的网络设备发送数据帧，与它在同一个VLAN中的其它网路设备都能接收到数据帧。上面的例子中对虚拟机的pcnet网卡没有指定其连接的VLAN号，那么qemu默认会将该网卡连入vlan0。下面这个例子更具一般性：</p>
<p><code>-net nic,model=pcnet -net nic,model=rtl8139,vlan=1, -net nic,model=ne2k_pci,vlan=1</code></p>
<p>该命令为虚拟机创建了三块网卡，其中第一块网卡类型是pcnet，连入vlan0；第二块网卡类型是 rtl8139，第三块网卡类型是ne2k_pci，这两块都连入vlan1，所以第二块网卡与第三块网卡可以互相通信，但它们与第一块网卡不能直接通信。 </p>
<p>各个VLAN通过qemu提供的4种通信方式与外界联网：</p>
<p>使用用户模式的客户机可以连通宿主机及外部网络。用户模式网络完全由QEMU模拟实现整个TCP/IP协议栈，并且使用这个协议栈提供一个虚拟的NAT网络。它不依赖于宿主机上的网络工具组件，如bridge-utils、tunctl、dnsmasq、iptables等，因此也不需要root用户权限。</p>
<ol>
<li><p>User mode stack：使用用户模式的客户机可以连通宿主机及外部网络，外部网络不能主动与虚拟机通信。这种方式<strong>由QEMU实现整个TCP/IP协议栈</strong>，并且使用这个协议栈提供一个<strong>虚拟的NAT网络</strong>。负责在虚拟机VLAN和外部网络之间转发数据。它不依赖于宿主机上的网络工具组件，如bridge-utils、tunctl、dnsmasq、iptables等，因此也不需要root用户权限。当然，用户模式网络的缺陷也是明显的：<strong>因其在QEMU内部实现所有网络协议栈，相对性能较差。</strong> 虚拟机VLAN中的各个网络接口只能置于<strong>10.0.2.0</strong>子网中，此外，可以用<code>-redir</code>选项为宿主机和虚拟机的两个TCP或UDP端口建立映射，实现宿主机和虚拟机在特殊要求下的通信（例如X-server或ssh）。<strong>这种方式实现虚拟机上网很简单，类似vmware里的nat,qemu启动时加入-net user选项，虚拟机里使用dhcp方式， (如果没有指定<code>-net xx</code>这是默认配置)。</strong></p>
</li>
<li><p>socket：这种方式又分为TCP和UDP两种类型。<br>（1）TCP：为一个VLAN创建一个套接字，让该套接字在指定的TCP端口上监听，而其他VLAN连接到该套接字上，从而将多个VLAN连接起来。缺点在于<strong>如果监听套接字所在qemu进程崩溃，整个连接就无法工作</strong>。监听套接字所在VLAN通过<code>-net socket,listen</code>选项启用，其他VLAN通过<code>-net socket,connect</code>选项启用。<br>（2）UDP：所有VLAN连接到一个多播套接字上，从而使多个VLAN通过一个总线通信。所有VLAN都通过<code>-net socket,mcast</code>选项启用。</p>
<p>通过参数<code>-netdev socket</code> (或<code>-nic socket</code>或<code>-net socket</code>) 可以实现多个虚拟机之间的互联。 </p>
</li>
<li><p>TAP：这种方式首先需要在宿主机中创建并配置<strong>一个TAP设备</strong>，qemu进程将该TAP设备连接到虚拟机VLAN中。其次，为了实现虚拟机与外部网络的通信，在宿主机中通常还要<strong>创建并配置一个网桥</strong>，并将宿主机的网络接口（通常是eth0）作为<strong>该网桥的一个接口</strong>。最后，只要将<strong>TAP设备作为网桥的另一个接口</strong>，虚拟机VLAN<strong>通过TAP设备</strong>就可以与外部网络完全通信了。这是因为，宿主机的eth0接口作为网桥的接口，与外部网络连接；TAP设备作为网桥的另一个接口，与虚拟机VLAN连接，这样两个网络就连通了。此时，网桥在这两个网络之间转发数据帧。<br>这里有两个问题需要注意：<br>（1）网桥的转发工作需要得到内核的支持，所以在编译宿主机内核时需要选择与桥接相关的配置选项。<br>（2）<strong>当宿主机eth0接口作为网桥接口时，不能为其配置IP地址，而要将IP地址配置给网桥。</strong><br>TAP方式由<code>-net tap</code>选项启用。</p>
</li>
<li><p>VDE：这种方式首先要启动一个VDE进程，该进程打开一个TAP设备，然后各个虚拟机VLAN与VDE进程连接，这样各个VLAN就可以通过TAP设备连接起来。VDE进程通过执行<code>vde_switch</code>命令启动，各个VLAN所在qemu进程通过执行<code>veqe</code>命令启动，这些VLAN就可以与VDE进程连接了。</p>
<p>以上四种通信方式中，socket方式和VDE方式用于虚拟机VLAN之间的连接，而user mode stack方式与外部网路的通信比较有限，<strong>Firmadyne中也是利用TAP方式配置qemu网络</strong>，所以下面主要讨论TAP方式的配置。 </p>
</li>
</ol>
<h2 id="qemu网络配置（TAP方式）"><a href="#qemu网络配置（TAP方式）" class="headerlink" title="qemu网络配置（TAP方式）"></a>qemu网络配置（TAP方式）</h2><p>参照 <a href="https://zh.wikipedia.org/wiki/TUN与TAP" target="_blank" rel="noopener">wiki</a> 对TAP/TUN介绍。<strong>TUN/TAP是操作系统内核支持的网络虚拟设备</strong>，这种网络设备完全由的软件实现。与网络硬件设备不同，TUN/TAP负责<strong>在内核协议栈与用户进程之间传送协议数据单元</strong>。TUN与TAP的区别在于，TUN工作在网络层，而TAP则工作在数据链路层。具体在运行TCP/IP的以太网中，TUN与应用程序交换IP包，而TAP与应用程序交换以太帧。所以TUN通常涉及路由，而TAP则常用于网络桥接。TUN/TAP的典型应用包括：虚拟私有网络OpenVPN、OpenSSH 以及虚拟机器QEMU、KVM。 </p>
<h3 id="具体配置过程"><a href="#具体配置过程" class="headerlink" title="具体配置过程"></a>具体配置过程</h3><ol>
<li><p>首先确定你的机器支持 TAP/TUN 虚拟设备</p>
</li>
<li><p>安装两个配置网络所需软件包： </p>
<pre class=" language-sh"><code class="language-sh">apt-get install bridge-utils        # 虚拟网桥工具
apt-get install uml-utilities       # UML（User-mode linux）工具</code></pre>
</li>
<li><p>配置虚拟网桥的操作（假设系统启动后eth0已经启动，并且从DHCP获得IP地址）</p>
<p>一次性操作，每次重启失效。最好写一个脚本，重启之后可以批处理。</p>
<pre class=" language-sh"><code class="language-sh">ifconfig &lt;你的网卡名称(能上网的那张)&gt; down    # 首先关闭宿主机网卡接口
brctl addbr br0                     # 添加一座名为 br0 的网桥
brctl addif br0 &lt;你的网卡名称&gt;        # 在 br0 中添加一个接口
brctl stp br0 off                   # 如果只有一个网桥，则关闭生成树协议
brctl setfd br0 1                   # 设置 br0 的转发延迟
brctl sethello br0 1                # 设置 br0 的 hello 时间
ifconfig br0 0.0.0.0 promisc up     # 启用 br0 接口
ifconfig &lt;你的网卡名称&gt; 0.0.0.0 promisc up    # 启用网卡接口，作为网桥的一端
dhclient br0                        # 从 dhcp 服务器获得 br0 的 IP 地址
brctl show br0                      # 查看虚拟网桥列表
brctl showstp br0                   # 查看 br0 的各接口信息

#在没有dhcp服务器的网络中也可以用ifconfig命令为br0接口配置一个静态IP地址：
ifconfig br0 192.168.0.22 netmask 255.255.255.0
route add -net 0.0.0.0 netmask 0.0.0.0 gw 192.168.0.254</code></pre>
<p>永久性操作，启动时自动配置。</p>
<p>在之前的文章<a href="https://pup2y.github.io/2020/03/30/lu-you-qi-lou-dong-wa-jue-huan-jing-da-jian/">路由器漏洞挖掘环境搭建</a>有提到在 /etc/network/interfaces 文件中配置网桥br0。</p>
<pre class=" language-sh"><code class="language-sh">auto lo # linux中的回环网卡
iface lo inet loopback
auto ens33 # ubuntu16.04上网网卡
iface ens33 inet manual #其实可以设置为dhcp启动不影响
up ifconfig ens33 0.0.0.0 up
auto br0 #增加网桥
iface br0 inet dhcp #网桥的IP地址从dhcp服务器获得
  bridge_ports ens33 #网桥
  bridge_maxwait 0</code></pre>
</li>
<li><p>配置TAP设备作为网桥br0的另一端的操作：</p>
<p>可以把一下命令也写/etc/network/interfaces文件中。 </p>
<pre class=" language-sh"><code class="language-sh">tunctl -t tap0 -u root              # 创建一个 tap0 接口，只允许 root 用户访问
brctl addif br0 tap0                # 在虚拟网桥中增加一个 tap0 接口
ifconfig tap0 0.0.0.0 promisc up    # 启用 tap0 接口
brctl showstp br0                   # 显示 br0 的各个接口</code></pre>
<p>也可以在/etc/qemu-ifup（qemu启动时会运行的文件）中添加命令：</p>
<pre class=" language-sh"><code class="language-sh">#! /bin/sh
echo "Executing /etc/qemu-ifup"
echo "bridge networking"
echo "Bringing up $1 for bridge mode" #$1一般指tap0
sudo /sbin/ifconfig $1 0.0.0.0 promisc up #启用tap0接口
echo "Adding $1 to br0"
sudo /sbin/brctl addif br0 $1 #在网桥中增加tap0接口
sleep 3</code></pre>
</li>
<li><p>利用qemu系统模式启动镜像，指定网络连接模式是 TAP 即可。 </p>
<pre class=" language-sh"><code class="language-sh">sudo qemu-system-mips -M malta -kernel vmlinux-2.6.32-5-4kc-malta -hda debian_squeeze_mips_standard.qcow2 -append "root=/dev/sda1 console=tty0" -net nic,macaddr=00:16:3e:00:00:01 -net tap</code></pre>
<p>参数含义：-net nic 表示希望 QEMU 在虚拟机中创建一张虚拟网卡，-net tap 表示连接类型为 TAP。默认选择tap0以及启动调用脚本 /etc/qemu-ifup。</p>
<pre class=" language-sh"><code class="language-sh">-net tap,ifname=tap0,script=no,downscript=no</code></pre>
<p>可以更具体指定网卡接口名称(就是刚才创建的 tap0，相当于把虚拟机接入网桥)。script 和 downscript 两个选项的作用是告诉 QEMU 在启动系统的时候是否调用脚本自动配置网络环境，如果这两个选项为空，那么 QEMU 启动和退出时会自动选择第一个不存在的 tap 接口(通常是 tap0)为参数，调用脚本 /etc/qemu-ifup 和 /etc/qemu-ifdown。</p>
</li>
<li><p>在ubuntu16.04上演示：</p>
<p>在 /etc/network/interfaces 文件中配置网桥br0，在/etc/qemu-ifup中配置tap0。</p>
<p>在qemu启动虚拟机之前，<code>ifconfig -a</code>查看网卡信息，此时已经有网桥br0了。</p>
<p><img src="ifconfig.png" alt=""> </p>
<p>启动qemu时，自动调用/etc/qemu-ifup，启用tap0网卡并接入网桥中。这时<code>ifconfig</code>可以看见多了tap0网卡。</p>
<p><img src="%E5%90%AF%E5%8A%A8qemu.png" alt=""></p>
<p>使用root/root登入qemu虚拟机<code>ifconfig</code>查看网卡信息。</p>
<p><img src="qemu_ifconfig.png" alt=""></p>
<p>发现eth1网卡的ip地址为192.168.0.101，<code>cat /etc/network/interfaces</code>发现eth1是通过dhcp服务器分配ip地址的。</p>
<p><img src="qemu%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%BD%91%E5%8D%A1%E9%85%8D%E7%BD%AE.png" alt=""></p>
<p><code>ping www.baidu.com</code>能够ping通说明配置成功了。</p>
<p><img src="ping%E7%99%BE%E5%BA%A6.png" alt=""></p>
<p><code>brctl show br0</code>查看br0网桥列表，<code>brctl showstp br0</code>查看br0网桥的各接口信息。可以看到网桥连着两块网卡tap0和ens33。</p>
<p><img src="%E7%BD%91%E6%A1%A5%E5%90%84%E6%8E%A5%E5%8F%A3%E4%BF%A1%E6%81%AF.png" alt=""></p>
</li>
</ol>
<h1 id="Firmadyne中配置网卡部分"><a href="#Firmadyne中配置网卡部分" class="headerlink" title="Firmadyne中配置网卡部分"></a>Firmadyne中配置网卡部分</h1><p>文件：/firmadyne/scratch/x/run.sh(x是对应固件的编号，如果下载了schema并导入了postgresql数据库的话，则是按照数据库中的编号)</p>
<pre class=" language-sh"><code class="language-sh">···
#配置网卡过程
TAPDEV_0=tap${IID}_0
HOSTNETDEV_0=${TAPDEV_0}
echo "Creating TAP device ${TAPDEV_0}..."
sudo tunctl -t ${TAPDEV_0} -u ${USER}

echo "Initializing VLAN..."
HOSTNETDEV_0=${TAPDEV_0}.1
sudo ip link add link ${TAPDEV_0} name ${HOSTNETDEV_0} type vlan id 1
sudo ip link set ${TAPDEV_0} up

echo "Bringing up TAP device..."
sudo ip link set ${HOSTNETDEV_0} up
sudo ip addr add 192.168.0.2/24 dev ${HOSTNETDEV_0}

echo "Adding route to 192.168.0.1..."
sudo ip route add 192.168.0.1 via 192.168.0.1 dev ${HOSTNETDEV_0}
···

# 利用qemu系统模式进行仿真
 ${QEMU} -m 256 -M ${QEMU_MACHINE} -kernel ${KERNEL} \
    -drive if=ide,format=raw,file=${IMAGE} -append "root=${QEMU_ROOTFS} console=ttyS0 nandsim.parts=64,64,64,64,64,64,64,64,64,64 rdinit=/firmadyne/preInit.sh rw debug ignore_loglevel print-fatal-signals=1 user_debug=31 firmadyne.syscall=0" \
    -nographic \
    -netdev tap,id=net0,ifname=${TAPDEV_0},script=no -device e1000,netdev=net0 -netdev socket,id=net1,listen=:2001 -device e1000,netdev=net1 -netdev socket,id=net2,listen=:2002 -device e1000,netdev=net2 -netdev socket,id=net3,listen=:2003 -device e1000,netdev=net3 | tee ${WORK_DIR}/qemu.final.serial.log</code></pre>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
            <!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]-->
            <audio id="audio" loop="1" preload="auto" controls="controls" data-autoplay="true">
                <source type="audio/mpeg" src="">
            </audio>
            
                <ul id="audio-list" style="display:none">
                    
                        
                            <li title='0' data-url='http://music.163.com/song?id=441532&userid=258169074'></li>
                        
                    
                        
                            <li title='1' data-url='https://link.hhtjim.com/163/26584453.mp3'></li>
                        
                    
                        
                            <li title='2' data-url='https://link.hhtjim.com/163/28245304.mp3'></li>
                        
                    
                </ul>
            
        </div>
        
    <div id='gitalk-container' class="comment link"
		data-enable='true'
        data-ae='true'
        data-ci='177c577b486a2fd2b061'
        data-cs='ce4ec96a3a9f14b35d6e9d750e1d7f231c22db0e'
        data-r='pup2y.github.io'
        data-o='pup2y'
        data-a='pup2y'
        data-d='true'
    >查看评论</div>


    </div>
    
        <div class='side'>
			<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Qemu与外部网络通信"><span class="toc-number">1.</span> <span class="toc-text">Qemu与外部网络通信</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#基本概念"><span class="toc-number">1.1.</span> <span class="toc-text">基本概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#qemu网络配置（TAP方式）"><span class="toc-number">1.2.</span> <span class="toc-text">qemu网络配置（TAP方式）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#具体配置过程"><span class="toc-number">1.2.1.</span> <span class="toc-text">具体配置过程</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Firmadyne中配置网卡部分"><span class="toc-number">2.</span> <span class="toc-text">Firmadyne中配置网卡部分</span></a></li></ol>	
        </div>
    
</div>


    </div>
</div>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/assets/koharu.model.json"},"display":{"superSample":2,"hOffset":0,"vOffset":-20,"position":"right","width":145,"height":315},"mobile":{"show":true,"scale":0.5},"react":{"opacityDefault":0.7,"opacityOnHover":0.8},"log":false});</script></body>

<script src="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>


<script src="//lib.baomitu.com/jquery/1.8.3/jquery.min.js"></script>
<script src="/js/plugin.js"></script>
<script src="/js/typed.js"></script>
<script src="/js/diaspora.js"></script>


<link rel="stylesheet" href="/photoswipe/photoswipe.css">
<link rel="stylesheet" href="/photoswipe/default-skin/default-skin.css">


<script src="/photoswipe/photoswipe.min.js"></script>
<script src="/photoswipe/photoswipe-ui-default.min.js"></script>


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>



<script type="text/x-mathjax-config">
    MathJax.Hub.Config({"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"], linebreaks: { automatic:true }, EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50) },
        tex2jax: { inlineMath: [ ["$", "$"], ["\\(","\\)"] ], processEscapes: true, ignoreClass: "tex2jax_ignore|dno",skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']},
        TeX: {  noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } }, Macros: { href: "{}" } },
        messageStyle: "none"
    });
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>




</html>
